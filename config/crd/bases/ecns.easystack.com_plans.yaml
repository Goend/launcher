---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.11.3
  creationTimestamp: null
  name: plans.ecns.easystack.com
spec:
  group: ecns.easystack.com
  names:
    kind: Plan
    listKind: PlanList
    plural: plans
    singular: plan
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: Plan is the Schema for the plans API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: PlanSpec defines the desired state of Plan
            properties:
              ansible_plan_auto:
                description: AnsiblePlanAuto  decide to auto to run ansible plan
                type: boolean
              cluster_name:
                description: ClusterName is the cluster name => clusters.cluster.x-k8s.io
                  --------------------------------=> openstackclusters.infrastructure.cluster.x-k8s.io
                type: string
              cni_type:
                description: CniType is the cni type
                type: string
              cni_work_mode:
                description: CniWorkMode is the cni work mode
                type: string
              dns_nameservers:
                description: DNSNameservers is the dns nameservers of subnet which
                  auto created
                items:
                  type: string
                type: array
              external_network_id:
                description: externalNetworkId is the external network id WHEN use_float_ip
                  is true, we will get a fip from this network
                type: string
              k8sVersion:
                description: K8sVersion is the version of kubernetes => ansible kubernetes
                  tag
                type: string
              machine_sets:
                items:
                  description: MachineSetReconcile is the  machine config Maybe we
                    should create a Bastion machine for master machine to access and
                    set the SSH  rsa  to the Bastion machine
                  properties:
                    infras:
                      description: Infras is the infras of machine
                      items:
                        properties:
                          availability_zone:
                            description: AvailabilityZone are a set of failure domains
                              for machines decide the every machine's AZ
                            type: string
                          flavor:
                            description: Flavor is the flavor of machine
                            type: string
                          image:
                            description: image is the image of machine
                            type: string
                          replica:
                            description: replica is the replica of machine
                            format: int32
                            type: integer
                          subnets:
                            description: subnets are a set of subnets for machines
                              decide the every machine's subnet when NetMode == existed,
                              the subnets is required
                            properties:
                              fix_ip:
                                description: FixIP is the fix ip of subnet
                                type: string
                              subnet_network:
                                description: SubnetNetwork is the network of subnet
                                type: string
                              subnet_uuid:
                                description: uuid is the subnet uuid of subnet
                                type: string
                            required:
                            - fix_ip
                            - subnet_network
                            - subnet_uuid
                            type: object
                          uid:
                            description: UID is the uid of infra
                            type: string
                          volumes:
                            description: Volumes are the volume type of machine,include
                              root volume and data volume
                            items:
                              properties:
                                index:
                                  description: Index is the index of volume 0==root
                                    volume
                                  type: integer
                                volume_size:
                                  description: VolumeSize is the volume size of machine
                                  type: integer
                                volume_type:
                                  description: VolumeType is the volume type of machine
                                  type: string
                              required:
                              - index
                              - volume_size
                              - volume_type
                              type: object
                            type: array
                        required:
                        - availability_zone
                        - flavor
                        - image
                        - replica
                        - uid
                        type: object
                      type: array
                    init:
                      description: CloudInit is the cloud init secret of machine,base64
                        file,can use it to config the machine such as init disk...
                      type: string
                    name:
                      description: Name is the name of machine
                      type: string
                    number:
                      description: Number is the number of all machine
                      format: int32
                      type: integer
                    role:
                      description: Role is the role of machine
                      type: string
                  required:
                  - name
                  - number
                  - role
                  type: object
                type: array
              mode:
                type: string
              monitor:
                description: Monitor is the pvc config of etcd
                properties:
                  auto_clear_days:
                    description: AutoClearDays is the auto clear days
                    type: string
                  pvc_cap:
                    description: PvcCap is the pvc cap
                    type: string
                  pvc_type:
                    description: PvcType is the pvc type
                    type: string
                required:
                - auto_clear_days
                - pvc_cap
                - pvc_type
                type: object
              node_cidr:
                description: NodeCIDR is the node cidr of subnet which auto created
                type: string
              other_ansible_opts:
                additionalProperties:
                  type: string
                description: OtherAnsibleOpts is the ansible custome vars OtherAnsibleOpts
                  => ansible test/vars.yaml
                type: object
              paused:
                description: Paused is the flag to pause the plan
                type: boolean
              pod_cidr:
                description: PodCidr is the pod cidr
                type: string
              repo:
                description: Repo is the repo of hub
                type: string
              ssh_key:
                description: SshKey is the all cluster machine's public key Maybe
                  we should create a new ssh pair for every cluster SshKey is the
                  public key of the pair
                type: string
              svc_cidr:
                description: SvcCidr is the svc cidr
                type: string
              use_float_ip:
                description: UseFloatIP decied to get fips or no
                type: boolean
              user:
                description: UserInfo is the user of keystone auth
                properties:
                  auth_url:
                    description: AuthUrl is the auth url of keystone
                    type: string
                  region:
                    description: Region is the region of keystone
                    type: string
                  token:
                    description: Token is the token of keystone,expired time is 6h
                    type: string
                required:
                - auth_url
                - region
                - token
                type: object
            required:
            - cluster_name
            - cni_type
            - k8sVersion
            - machine_sets
            - mode
            - monitor
            - pod_cidr
            - repo
            - ssh_key
            - svc_cidr
            - use_float_ip
            type: object
          status:
            description: PlanStatus defines the observed state of Plan
            properties:
              server_group_id:
                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state
                  of cluster Important: Run "make" to regenerate code after modifying
                  this file ServerGroupID is the server group id of cluster'
                properties:
                  master_server_group_id:
                    description: MasterServerGroupID is the server group id of master
                      machine
                    type: string
                  worker_server_group_id:
                    description: WorkerServerGroupID is the server group id of worker
                      machine
                    type: string
                type: object
              vm_done:
                description: VMDone show the vm is created or not
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
